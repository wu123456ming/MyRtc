webpackJsonp([1],{0:function(e,t,n){n("j1ja"),e.exports=n("NHnr")},"4ml/":function(e,t){},Bhet:function(e,t){},IGGl:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("j1ja"),n("MxqJ");var a=n("/5sW"),i=n("Au9i"),o=n.n(i),s=(n("d8/S"),{name:"App",data:function(){return{isPc:!1}},created:function(){this.isPc=null==navigator.userAgent.toLowerCase().match(/(ipod|ipad|iphone|android|coolpad|mmp|smartphone|midp|wap|xoom|symbian|j2me|blackberry|wince)/i)}}),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var c=n("VU/8")(s,r,!1,function(e){n("Bhet"),n("IGGl")},"data-v-35eaa19c",null).exports,l=n("/ocq"),d=n("mvHQ"),u=n.n(d),p=n("Pg0u"),h=n.n(p),m=n("qB+U"),f=n.n(m),x="#1f212d",v="#F9293E",y="#00aa3b",g="#39afe6",w="#da6ee8",S="#ffab42",A="#00940b";function b(e,t,n,a){var i=function(e,t){var n=e.split(":")[0],a=Number(e.split(":")[1]),i=parseInt((a+t)/60),o=parseInt((Number(n)+i)/24);if(i>0){var s;n=o>0?(s=(Number(n)+i)%24+"").length>1?s:"0"+s:(s=Number(n)+i+"").length>1?s:"0"+s,a=(r=(a+t)%60+"").length>1?r:0+r}else{var r;a=(r=a+t+"").length>1?r:"0"+r}return n+":"+a}(e,n);return a.push(i),i==t?a:b(i,t,n,a)}var I,L,O,k,C=function(e,t){var n=new Array,a=new Array,i=new Array,o=function(e){var t;return-1!=e.indexOf("us")?((t=new Array).push("09:30"),b("09:30","16:00",1,t)):-1!=e.indexOf("hs")?((t=new Array).push("09:30"),t.concat(b("09:30","11:29",1,t)),t.push("13:00"),t.concat(b("13:00","15:00",1,t)),t):-1!=e.indexOf("hk")?((t=new Array).push("09:30"),t.concat(b("09:30","11:59",1,t)),t.push("13:00"),t.concat(b("13:00","16:00",1,t)),t):void 0}(t);return $.each(e.data,function(e,t){n.push(t[1]),a.push(t[2]),i.push(t[3])}),{priceArr:n,avgPrice:a,vol:i,times:o}};function M(e,t){return((e-t)/t*100).toFixed(3)}function _(e){for(var t=[],n=[],a=[],i=0;i<e.length;i++)t.push(e[i]),n.push(e[i].splice(0,1)[0]),a.push(e[i][4]);return{datas:t,times:n,vols:a}}function D(e,t){for(var n=[],a=0,i=t.times.length;a<i;a++)if(a<e)n.push("-");else{for(var o=0,s=0;s<e;s++)o+=t.datas[a-s][1];n.push((o/e).toFixed(2))}return n}I=function(e,t,n){var a,i,o,s;if(s=2/(e+1),n)for(o=[t[0][n]],a=1,i=t.length;a<i;a++)o.push((s*t[a][n]+(1-s)*o[a-1]).toFixed(2));else for(o=[t[0]],a=1,i=t.length;a<i;a++)o.push((s*t[a]+(1-s)*o[a-1]).toFixed(3));return o},L=function(e,t,n,a){var i,o,s,r,c;for(s=[],r=I(e,n,a),c=I(t,n,a),i=0,o=n.length;i<o;i++)s.push((r[i]-c[i]).toFixed(3));return s},O=function(e,t){return I(e,t)},k=function(e,t,n,a,i){var o,s,r,c,l,d;for(d={},l=[],r=L(e,t,a,i),c=O(n,r),o=0,s=a.length;o<s;o++)l.push((2*(r[o]-c[o])).toFixed(3));return d.dif=r,d.dea=c,d.macd=l,d};var E={initMOption:function(e,t){var n=C(e,t);return{tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter:function(t,a,i){var o,s=t[0].dataIndex,r='<div class="commColor" style="width:100px;"><div>当前价 <span  '+(o=n.priceArr[s]>e.yestclose?'style="color:#ff4242"':'style="color:#26bf66"')+" >"+n.priceArr[s]+"</span></div>";return r+="<div>均价 <span  "+o+" >"+n.avgPrice[s]+"</span></div>",r+="<div>涨幅 <span  "+o+" >"+M(n.priceArr[s],e.yestclose)+"%</span></div>",r+="<div>成交量 <span  "+o+" >"+n.vol[s]+"</span></div></div>"}},legend:{icon:"rect",type:"scroll",itemWidth:14,itemHeight:2,left:0,top:"-1%",textStyle:{fontSize:12,color:"#0e99e2"}},axisPointer:{show:!0},color:[g,w],grid:[{id:"gd1",left:"0%",right:"1%",height:"67.5%",top:"5%"},{id:"gd2",left:"0%",right:"1%",height:"67.5%",top:"5%"},{id:"gd3",left:"0%",right:"1%",top:"75%",height:"19%"}],xAxis:[{gridIndex:0,data:n.times,axisLabel:{show:!1},splitLine:{show:!1}},{show:!1,gridIndex:1,data:n.times,axisLabel:{show:!1},splitLine:{show:!1}},{splitNumber:2,type:"category",gridIndex:2,data:n.times,axisLabel:{color:"#9b9da9",fontSize:10}}],yAxis:[{gridIndex:0,scale:!0,splitNumber:3,axisLabel:{inside:!0,fontWeight:"bold",color:function(t){return t==e.yestclose?"#aaa":t>e.yestclose?v:y}},z:4,splitLine:{show:!1,lineStyle:{color:"#181a23"}}},{scale:!0,gridIndex:1,splitNumber:3,position:"right",z:4,axisLabel:{color:function(t){return t==e.yestclose?"#aaa":t>e.yestclose?v:y},inside:!0,fontWeight:"bold",formatter:function(t){var n=M(t,e.yestclose);return Number(n).toFixed(2)+" %"}},splitLine:{show:!1,lineStyle:{color:"#181a23"}},axisPointer:{show:!0,label:{formatter:function(t){return M(t.value,e.yestclose)+"%"}}}},{gridIndex:2,z:4,splitNumber:3,axisLine:{onZero:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{color:"#c7c7c7",inside:!0,fontSize:8}}],dataZoom:[],backgroundColor:x,blendMode:"source-over",series:[{name:"当前价",type:"line",data:n.priceArr,smooth:!0,symbol:"circle",lineStyle:{normal:{opacity:.8,color:"#39afe6",width:1}},areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(0, 136, 212, 0.7)"},{offset:.8,color:"rgba(0, 136, 212, 0.02)"}],!1),shadowColor:"rgba(0, 0, 0, 0.1)",shadowBlur:10}}},{name:"均价",type:"line",data:n.avgPrice,smooth:!0,symbol:"circle",lineStyle:{normal:{opacity:.8,color:"#da6ee8",width:1}}},{type:"line",data:n.priceArr,smooth:!0,symbol:"none",gridIndex:1,xAxisIndex:1,yAxisIndex:1,lineStyle:{normal:{width:0}}},{name:"Volumn",type:"bar",gridIndex:2,xAxisIndex:2,yAxisIndex:2,data:n.vol,barWidth:"60%",itemStyle:{normal:{color:function(e){return n.priceArr[e.dataIndex]>n.priceArr[e.dataIndex-1]?v:y}}}}]}},initKOption:function(e){var t=_(e),n=k(12,26,9,t.datas,1),a=t.datas.map(function(e){return e[1]});return{tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{icon:"rect",type:"scroll",itemWidth:14,itemHeight:2,left:0,top:"-1%",show:!1,animation:!0,textStyle:{fontSize:12,color:"#0e99e2"},pageIconColor:"#0e99e2",selected:{"K线周期图表":!0,BOLL_U:!1,BOLL_M:!1,BOLL_L:!1,MA30:!1,MA10:!1,MA5:!1,MACD:!1,RSI:!1,Volumn:!1,OBV:!1,K:!1,D:!1,J:!1}},axisPointer:{show:!0,link:{xAxisIndex:"all"}},color:[g,w,S,A],grid:[{id:"gd1",left:"0%",right:"4%",height:"75%",top:"2%"},{left:"0%",right:"4%",top:"79%",height:"14%"}],xAxis:[{type:"category",data:t.times,scale:!0,boundaryGap:!1,axisLine:{onZero:!1},axisLabel:{show:!1,color:"#c7c7c7",fontSize:8},splitLine:{show:!1,lineStyle:{color:"#3a3a3e"}},splitNumber:20,min:"dataMin",max:"dataMax"},{type:"category",scale:!0,boundaryGap:!1,axisLine:{onZero:!1},gridIndex:1,data:t.times,axisLabel:{show:!0,color:"#c7c7c7",fontSize:8}}],yAxis:[{scale:!0,position:"right",z:4,axisLabel:{color:"#777777",fontSize:8,inside:!0},splitLine:{show:!1,lineStyle:{color:"#181a23"}}},,{z:4,gridIndex:1,splitNumber:2,position:"right",axisLine:{onZero:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{color:"#777777",inside:!0,fontSize:8}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:70,end:100}],animation:!1,backgroundColor:x,blendMode:"source-over",series:[{name:"K线周期图表",type:"candlestick",data:t.datas,large:!0,largeThreshold:100,itemStyle:{normal:{color:v,color0:y,borderColor:v,borderColor0:y}}},{name:"MA5",type:"line",data:D(5,t),smooth:!0,symbol:"none",lineStyle:{normal:{opacity:.8,color:"#39afe6",width:1}}},{name:"MA10",type:"line",data:D(10,t),smooth:!0,symbol:"none",lineStyle:{normal:{opacity:.8,color:"#da6ee8",width:1}}},{name:"MA30",type:"line",data:D(30,t),smooth:!0,symbol:"none",lineStyle:{normal:{opacity:.8,width:1,color:A}}},{name:"Volumn",type:"bar",xAxisIndex:1,yAxisIndex:1,data:t.vols,itemStyle:{normal:{color:function(e){return t.datas[e.dataIndex][1]>t.datas[e.dataIndex][0]?v:y}}}},{name:"MACD",type:"bar",xAxisIndex:1,yAxisIndex:1,data:n.macd,itemStyle:{normal:{color:function(e){return e.data>=0?v:y}}}},{name:"RSI",type:"line",symbol:"none",xAxisIndex:1,yAxisIndex:1,data:f.a.RSI(a).rsi6,lineStyle:{normal:{opacity:.8,color:"#39afe6",width:1}}},{name:"K",type:"line",symbol:"none",xAxisIndex:1,yAxisIndex:1,data:f.a.KDJ(t.datas.map(function(e){return[e[3],e[2],e[1]]})).k,lineStyle:{normal:{opacity:.8,color:"#39afe6",width:1}}},{name:"D",type:"line",symbol:"none",xAxisIndex:1,yAxisIndex:1,data:f.a.KDJ(t.datas.map(function(e){return[e[3],e[2],e[1]]})).d,lineStyle:{normal:{opacity:.8,color:"#39af00",width:1}}},{name:"J",type:"line",symbol:"none",xAxisIndex:1,yAxisIndex:1,data:f.a.KDJ(t.datas.map(function(e){return[e[3],e[2],e[1]]})).j,lineStyle:{normal:{opacity:.8,color:"#d11fe6",width:1}}},{name:"OBV",type:"line",symbol:"none",xAxisIndex:1,yAxisIndex:1,data:f.a.OBV(t.datas.map(function(e){return[e[1],e[4]]})),lineStyle:{normal:{opacity:.8,color:"#39afe6",width:1}}},{name:"BOLL_U",type:"line",symbol:"none",xAxisIndex:0,yAxisIndex:0,data:f.a.BOLL(t.datas.map(function(e){return e[1]})).upper,lineStyle:{normal:{opacity:.8,color:"#9900f0",width:1}}},{name:"BOLL_M",type:"line",symbol:"none",xAxisIndex:0,yAxisIndex:0,data:f.a.BOLL(t.datas.map(function(e){return e[1]})).mid,lineStyle:{normal:{opacity:.8,color:"#ffffff",width:1}}},{name:"BOLL_L",type:"line",symbol:"none",xAxisIndex:0,yAxisIndex:0,data:f.a.BOLL(t.datas.map(function(e){return e[1]})).lower,lineStyle:{normal:{opacity:.8,color:"#9900f0",width:1}}}]}},changeKDataOption:function(e){var t=_(e),n=k(12,26,9,t.datas,1),a=t.datas.map(function(e){return e[1]});return{xAxis:[{data:t.times}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:70,end:100}],axisPointer:{show:!0,link:{xAxisIndex:"all"}},series:[{name:"K线周期图表",data:t.datas},{name:"MA5",data:D(5,t)},{name:"MA10",type:"line",data:D(10,t)},{name:"MA30",type:"line",data:D(30,t)},{name:"Volumn",type:"bar",xAxisIndex:1,yAxisIndex:1,data:t.vols},{name:"MACD",type:"bar",xAxisIndex:1,yAxisIndex:1,data:n.macd},{name:"RSI",type:"line",symbol:"none",xAxisIndex:1,yAxisIndex:1,data:f.a.RSI(a).rsi6},{name:"K",type:"line",symbol:"none",xAxisIndex:1,yAxisIndex:1,data:f.a.KDJ(t.datas.map(function(e){return[e[3],e[2],e[1]]})).k},{name:"D",type:"line",symbol:"none",xAxisIndex:1,yAxisIndex:1,data:f.a.KDJ(t.datas.map(function(e){return[e[3],e[2],e[1]]})).d},{name:"J",type:"line",symbol:"none",xAxisIndex:1,yAxisIndex:1,data:f.a.KDJ(t.datas.map(function(e){return[e[3],e[2],e[1]]})).j},{name:"OBV",type:"line",symbol:"none",xAxisIndex:1,yAxisIndex:1,data:f.a.OBV(t.datas.map(function(e){return[e[1],e[4]]}))},{name:"BOLL_U",type:"line",symbol:"none",xAxisIndex:0,yAxisIndex:0,data:f.a.BOLL(t.datas.map(function(e){return e[1]})).upper},{name:"BOLL_M",type:"line",symbol:"none",xAxisIndex:0,yAxisIndex:0,data:f.a.BOLL(t.datas.map(function(e){return e[1]})).mid},{name:"BOLL_L",type:"line",symbol:"none",xAxisIndex:0,yAxisIndex:0,data:f.a.BOLL(t.datas.map(function(e){return e[1]})).lower}]}}},B=n("fZjL"),N=n.n(B),T=n("woOf"),V=n.n(T),P=n("//Fk"),K=n.n(P),R=n("mtWM"),U=n.n(R),J=0,z=8;function W(e){return Y(j(X(e),e.length*z))}function j(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,a=-271733879,i=-1732584194,o=271733878,s=0;s<e.length;s+=16){var r=n,c=a,l=i,d=o;a=q(a=q(a=q(a=q(a=Z(a=Z(a=Z(a=Z(a=H(a=H(a=H(a=H(a=G(a=G(a=G(a=G(a,i=G(i,o=G(o,n=G(n,a,i,o,e[s+0],7,-680876936),a,i,e[s+1],12,-389564586),n,a,e[s+2],17,606105819),o,n,e[s+3],22,-1044525330),i=G(i,o=G(o,n=G(n,a,i,o,e[s+4],7,-176418897),a,i,e[s+5],12,1200080426),n,a,e[s+6],17,-1473231341),o,n,e[s+7],22,-45705983),i=G(i,o=G(o,n=G(n,a,i,o,e[s+8],7,1770035416),a,i,e[s+9],12,-1958414417),n,a,e[s+10],17,-42063),o,n,e[s+11],22,-1990404162),i=G(i,o=G(o,n=G(n,a,i,o,e[s+12],7,1804603682),a,i,e[s+13],12,-40341101),n,a,e[s+14],17,-1502002290),o,n,e[s+15],22,1236535329),i=H(i,o=H(o,n=H(n,a,i,o,e[s+1],5,-165796510),a,i,e[s+6],9,-1069501632),n,a,e[s+11],14,643717713),o,n,e[s+0],20,-373897302),i=H(i,o=H(o,n=H(n,a,i,o,e[s+5],5,-701558691),a,i,e[s+10],9,38016083),n,a,e[s+15],14,-660478335),o,n,e[s+4],20,-405537848),i=H(i,o=H(o,n=H(n,a,i,o,e[s+9],5,568446438),a,i,e[s+14],9,-1019803690),n,a,e[s+3],14,-187363961),o,n,e[s+8],20,1163531501),i=H(i,o=H(o,n=H(n,a,i,o,e[s+13],5,-1444681467),a,i,e[s+2],9,-51403784),n,a,e[s+7],14,1735328473),o,n,e[s+12],20,-1926607734),i=Z(i,o=Z(o,n=Z(n,a,i,o,e[s+5],4,-378558),a,i,e[s+8],11,-2022574463),n,a,e[s+11],16,1839030562),o,n,e[s+14],23,-35309556),i=Z(i,o=Z(o,n=Z(n,a,i,o,e[s+1],4,-1530992060),a,i,e[s+4],11,1272893353),n,a,e[s+7],16,-155497632),o,n,e[s+10],23,-1094730640),i=Z(i,o=Z(o,n=Z(n,a,i,o,e[s+13],4,681279174),a,i,e[s+0],11,-358537222),n,a,e[s+3],16,-722521979),o,n,e[s+6],23,76029189),i=Z(i,o=Z(o,n=Z(n,a,i,o,e[s+9],4,-640364487),a,i,e[s+12],11,-421815835),n,a,e[s+15],16,530742520),o,n,e[s+2],23,-995338651),i=q(i,o=q(o,n=q(n,a,i,o,e[s+0],6,-198630844),a,i,e[s+7],10,1126891415),n,a,e[s+14],15,-1416354905),o,n,e[s+5],21,-57434055),i=q(i,o=q(o,n=q(n,a,i,o,e[s+12],6,1700485571),a,i,e[s+3],10,-1894986606),n,a,e[s+10],15,-1051523),o,n,e[s+1],21,-2054922799),i=q(i,o=q(o,n=q(n,a,i,o,e[s+8],6,1873313359),a,i,e[s+15],10,-30611744),n,a,e[s+6],15,-1560198380),o,n,e[s+13],21,1309151649),i=q(i,o=q(o,n=q(n,a,i,o,e[s+4],6,-145523070),a,i,e[s+11],10,-1120210379),n,a,e[s+2],15,718787259),o,n,e[s+9],21,-343485551),n=Q(n,r),a=Q(a,c),i=Q(i,l),o=Q(o,d)}return Array(n,a,i,o)}function F(e,t,n,a,i,o){return Q((s=Q(Q(t,e),Q(a,o)))<<(r=i)|s>>>32-r,n);var s,r}function G(e,t,n,a,i,o,s){return F(t&n|~t&a,e,t,i,o,s)}function H(e,t,n,a,i,o,s){return F(t&a|n&~a,e,t,i,o,s)}function Z(e,t,n,a,i,o,s){return F(t^n^a,e,t,i,o,s)}function q(e,t,n,a,i,o,s){return F(n^(t|~a),e,t,i,o,s)}function Q(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function X(e){for(var t=Array(),n=(1<<z)-1,a=0;a<e.length*z;a+=z)t[a>>5]|=(e.charCodeAt(a/z)&n)<<a%32;return t}function Y(e){for(var t=J?"0123456789ABCDEF":"0123456789abcdef",n="",a=0;a<4*e.length;a++)n+=t.charAt(e[a>>2]>>a%4*8+4&15)+t.charAt(e[a>>2]>>a%4*8&15);return n}var ee={hex_md5:W};a.default.prototype.$ELEMENT={size:"small"};var te="http://120.79.12.201",ne="cn853oEhQAZ9Z4VE",ae={getKlineHistoryList:te+"/app/v1/data/getKlineHistoryList",saveUserPushData:te+"/app/v1/push/saveUserPushData"};U.a.create({timeout:1e4});var ie={RequestSource:"3"},oe={};U.a.interceptors.request.use(function(e){return e.abort&&(e.cancelToken=new U.a.CancelToken(function(t){var n=e.url;oe[n]&&(oe[n]("repeat"),delete oe[n]),oe[n]=t})),e.params=e.params||{},e.params.t=(new Date).valueOf(),e.headers=V()({},e.headers,ie),ie.Authorization&&/MSIE 9/i.test(navigator.appVersion)&&(e.params.Authorization=ie.Authorization),e}),U.a.interceptors.response.use(function(e){return e.data.code,e},function(e){return e.message,K.a.reject(e)});var se=function(e,t,n,a,o){return"get"===e?(n.t=(new Date).getTime(),U.a.get(t,{params:n}).then(function(e){0===e.data.code?"function"==typeof a&&a(e.data.data,e.data.message):"function"==typeof o&&o(e.data)}).catch(function(e){Object(i.Toast)("系统异常"),"function"==typeof o&&o("系统异常")})):"post"===e?U.a.post(t,n).then(function(e){0===e.data.code?"function"==typeof a&&a(e.data.data,e.data.message):"function"==typeof o&&o(e.data)}).catch(function(e){Object(i.Toast)("系统异常"),"function"==typeof o&&o("系统异常")}):"error"};function re(e){var t={};N()(e).sort().forEach(function(n){t[n]=e[n]});var n=N()(t).map(function(e){return e+"="+t[e]}).join("&");return n+=ne,t.sign=ee.hex_md5(n),t}String.format=function(){for(var e=arguments[0],t=0;t<arguments.length-1;t++){var n=new RegExp("\\{"+t+"\\}","gm");e=e.replace(n,arguments[t+1])}return e};var ce=function(e,t){var n=ae.getKlineHistoryList,a=re(e);se("post",n,a,t,function(e){Object(i.Toast)(e.message)})},le=function(e,t){var n=ae.saveUserPushData,a=re(e);se("post",n,a,t,function(e){Object(i.Toast)(e.message)})},de=n("cT7S"),ue=n.n(de),pe={name:"page1",data:function(){return{userId:"47dafd5a4ab240aca89e2aac0a2e3a63",token:"52d80956b4bccbf9c0cc8ccef9c85021",instrument:"WTI#",isShowMA:!1,isShowBOLL:!1,isShowMACD:!1,isShowKDJ:!1,isShowRSI:!1,isShowVOLUME:!1,isShowOBV:!1,isShowPopup:!1,activeM:"M30",kprice:"-/-",dateType:1,notInit:!0,kData:[],ws:null,switchOpenName:"",kChart:null,maData:[{name:"M1",isAccept:!0},{name:"M5",isAccept:!0},{name:"M15",isAccept:!0},{name:"M30",isAccept:!0},{name:"H1",isAccept:!0},{name:"H4",isAccept:!0},{name:"D1",isAccept:!0},{name:"W1",isAccept:!0},{name:"MN",isAccept:!0}]}},methods:{onInput:function(e,t){e.name!==this.switchOpenName||t?this.switchOpenName=e.name:this.switchOpenName=""},onMChange:function(e){e.name!==this.activeM&&(this.activeM=e.name)},showPopup:function(e){this.isShowPopup=e},onSocketMessage:function(e){try{var t=JSON.parse(e.data).data[0];if(t.dateType===this.dateType&&t.instrument===this.instrument){this.kprice=t.openPrice+"/"+t.closePrice;var n=this.kData.slice(-1)[0];t.openDate>n[0]?(this.kData=this.kData.concat([t]),this.kChart.setOption(E.changeKDataOption(this.kData))):t.openDate===n[0]&&(this.kData.pop(),this.kData=this.kData.concat([t]),this.kChart.setOption(E.changeKDataOption(this.kData)))}}catch(e){}},onSocketEvent:function(e){},getFirst:function(){var e=this;this.kChart&&this.kChart.showLoading({text:"loading",color:"#c23531",textColor:"#000",maskColor:"rgba(0, 0, 0, 0.6)",zlevel:0}),this.dateType=this.maData.map(function(e){return e.name}).indexOf(this.activeM)+1,ce({instrument:this.instrument,dateType:this.dateType,id:"1",pageSize:"280",pageNo:"1",userId:this.userId,token:this.token,language:"zh-cn"},function(t){e.kChart&&e.kChart.hideLoading(),e.kData=t.list.reverse().map(function(e){return[e.openDate,e.openPrice,e.closePrice,e.lowPrice,e.highPrice,e.volume]}),e.kChart&&e.kChart.dispose(),e.kChart=h.a.init(e.$refs.kcontent),e.kChart.setOption(E.initKOption(e.kData)),e.isShowMA=!1,e.isShowVOLUME=!1,e.$nextTick(function(){e.isShowMA=!0,e.isShowVOLUME=!0})}),this.initSocket()},initSocket:function(){var e=this;this.ws||(this.ws=new ue.a("ws://120.79.12.201:8080/kline/websocket?userId="+this.userId),this.ws.onopen=this.onSocketEvent,this.ws.onclose=this.onSocketEvent,this.ws.onerror=this.onSocketEvent,this.ws.onmessage=this.onSocketMessage),setTimeout(function(){var t=u()({instrument:e.instrument,dateType:e.dateType,userId:e.userId});e.ws.send(t)},300)}},created:function(){this.getFirst()},destroyed:function(){this.ws.close()},components:{},watch:{isShowMA:function(e,t){this.kChart.setOption({legend:{selected:{MA30:e,MA10:e,MA5:e}}})},isShowBOLL:function(e,t){this.kChart.setOption({legend:{selected:{BOLL_U:e,BOLL_M:e,BOLL_L:e}}})},isShowMACD:function(e,t){e&&(this.isShowKDJ=!1,this.isShowRSI=!1,this.isShowVOLUME=!1,this.isShowOBV=!1),this.kChart.setOption({legend:{selected:{MACD:e}}})},isShowKDJ:function(e,t){e&&(this.isShowMACD=!1,this.isShowRSI=!1,this.isShowVOLUME=!1,this.isShowOBV=!1),this.kChart.setOption({legend:{selected:{K:e,D:e,J:e}}})},isShowRSI:function(e,t){e&&(this.isShowMACD=!1,this.isShowKDJ=!1,this.isShowVOLUME=!1,this.isShowOBV=!1),this.kChart.setOption({legend:{selected:{RSI:e}}})},isShowVOLUME:function(e,t){e&&(this.isShowMACD=!1,this.isShowKDJ=!1,this.isShowRSI=!1,this.isShowOBV=!1),this.kChart.setOption({legend:{selected:{Volumn:e}}})},isShowOBV:function(e,t){e&&(this.isShowMACD=!1,this.isShowKDJ=!1,this.isShowRSI=!1,this.isShowVOLUME=!1),this.kChart.setOption({legend:{selected:{OBV:e}}})},activeM:function(e,t){this.getFirst()},isShowPopup:function(e,t){if(!e&&""!==this.switchOpenName){var n=this.maData.map(function(e){return e.name}).indexOf(this.switchOpenName)+1;le({instrument:this.instrument,dateType:n,deviceNum:"111111111111",userId:this.userId,token:this.token,language:"zh-cn"})}}}},he={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-content"},[n("div",{staticClass:"c-header"},[n("div",{staticClass:"c-div-row"},[n("span",{staticClass:"c-span_large"},[e._v(e._s(e.instrument.replace("#","")))])]),e._v(" "),n("div",{staticClass:"c-div-row"},[n("span",{staticClass:"c-span_large"},[e._v("分时")]),e._v(" "),e._l(e.maData,function(t){return n("span",{staticClass:"c-span_middle",class:{"c-span_large-select":t.name===e.activeM},on:{click:function(n){return e.onMChange(t)}}},[e._v(e._s(t.name))])})],2),e._v(" "),n("div",{staticClass:"c-div-row"},[n("span",{staticClass:"c-span_price"},[e._v(e._s(e.kprice))]),n("span",{staticClass:"c-push",on:{click:function(t){return e.showPopup(!0)}}},[e._v("推送"),n("van-icon",{attrs:{name:"arrow-up"}})],1)])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],ref:"kcontent",staticClass:"K-line"}),e._v(" "),n("div",{staticClass:"c-indicator"},[n("span",{staticClass:"c-span_middle",class:{"c-span_large-select":e.isShowMA},on:{click:function(t){e.isShowMA=!e.isShowMA}}},[e._v("MA")]),e._v(" "),n("span",{staticClass:"c-span_middle",class:{"c-span_large-select":e.isShowBOLL},on:{click:function(t){e.isShowBOLL=!e.isShowBOLL}}},[e._v("BOLL")]),e._v(" "),n("span",{staticClass:"c-span_middle",class:{"c-span_large-select":e.isShowMACD},on:{click:function(t){e.isShowMACD=!e.isShowMACD}}},[e._v("MACD")]),e._v(" "),n("span",{staticClass:"c-span_middle",class:{"c-span_large-select":e.isShowKDJ},on:{click:function(t){e.isShowKDJ=!e.isShowKDJ}}},[e._v("KDJ")]),e._v(" "),n("span",{staticClass:"c-span_middle",class:{"c-span_large-select":e.isShowRSI},on:{click:function(t){e.isShowRSI=!e.isShowRSI}}},[e._v("RSI")]),e._v(" "),n("span",{staticClass:"c-span_middle",class:{"c-span_large-select":e.isShowVOLUME},on:{click:function(t){e.isShowVOLUME=!e.isShowVOLUME}}},[e._v("VOLUME")]),e._v(" "),n("span",{staticClass:"c-span_middle",class:{"c-span_large-select":e.isShowOBV},on:{click:function(t){e.isShowOBV=!e.isShowOBV}}},[e._v("OBV")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowPopup,expression:"isShowPopup"}],staticClass:"c-popou",on:{click:function(t){return e.showPopup(!1)}}},[n("div",{staticClass:"c-popou-content"},[n("ul",e._l(e.maData,function(t){return n("li",[n("div",{staticStyle:{padding:"2px 4px"}},[n("span",[e._v(e._s(t.name))]),e._v(" "),n("van-switch",{staticStyle:{float:"right"},attrs:{size:"12px",value:t.name===e.switchOpenName},on:{click:function(e){e.stopPropagation()},input:function(n){e.onInput(t,n)}}})],1)])}),0)])])])},staticRenderFns:[]};var me=n("VU/8")(pe,he,!1,function(e){n("gtMj")},"data-v-1d759536",null).exports;a.default.use(l.a);var fe=new l.a({routes:[{path:"/",redirect:"page1"},{path:"/page1",name:"page1",component:me}]}),xe={getUrlKey:function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null}},ve=n("Fd2+");n("4ml/");a.default.use(ve.a),a.default.use(o.a),a.default.config.productionTip=!1,a.default.prototype.$utils=xe,new a.default({el:"#app",router:fe,render:function(e){return e(c)}})},Pg0u:function(e,t){e.exports=echarts},cT7S:function(e,t,n){var a,i,o;i=[],void 0===(o="function"==typeof(a=function(){if("WebSocket"in window)return e.prototype.onopen=function(e){},e.prototype.onclose=function(e){},e.prototype.onconnecting=function(e){},e.prototype.onmessage=function(e){},e.prototype.onerror=function(e){},e.debugAll=!1,e.CONNECTING=WebSocket.CONNECTING,e.OPEN=WebSocket.OPEN,e.CLOSING=WebSocket.CLOSING,e.CLOSED=WebSocket.CLOSED,e;function e(t,n,a){var i={debug:!1,automaticOpen:!0,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:2e3,maxReconnectAttempts:null,binaryType:"blob"};for(var o in a||(a={}),i)void 0!==a[o]?this[o]=a[o]:this[o]=i[o];this.url=t,this.reconnectAttempts=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var s,r=this,c=!1,l=!1,d=document.createElement("div");function u(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}d.addEventListener("open",function(e){r.onopen(e)}),d.addEventListener("close",function(e){r.onclose(e)}),d.addEventListener("connecting",function(e){r.onconnecting(e)}),d.addEventListener("message",function(e){r.onmessage(e)}),d.addEventListener("error",function(e){r.onerror(e)}),this.addEventListener=d.addEventListener.bind(d),this.removeEventListener=d.removeEventListener.bind(d),this.dispatchEvent=d.dispatchEvent.bind(d),this.open=function(t){if((s=new WebSocket(r.url,n||[])).binaryType=this.binaryType,t){if(this.maxReconnectAttempts&&this.reconnectAttempts>this.maxReconnectAttempts)return}else d.dispatchEvent(u("connecting")),this.reconnectAttempts=0;r.debug||e.debugAll;var a=s,i=setTimeout(function(){r.debug||e.debugAll,l=!0,a.close(),l=!1},r.timeoutInterval);s.onopen=function(n){clearTimeout(i),r.debug||e.debugAll,r.protocol=s.protocol,r.readyState=WebSocket.OPEN,r.reconnectAttempts=0;var a=u("open");a.isReconnect=t,t=!1,d.dispatchEvent(a)},s.onclose=function(n){if(clearTimeout(i),s=null,c)r.readyState=WebSocket.CLOSED,d.dispatchEvent(u("close"));else{r.readyState=WebSocket.CONNECTING;var a=u("connecting");a.code=n.code,a.reason=n.reason,a.wasClean=n.wasClean,d.dispatchEvent(a),t||l||(r.debug||e.debugAll,d.dispatchEvent(u("close")));var i=r.reconnectInterval*Math.pow(r.reconnectDecay,r.reconnectAttempts);setTimeout(function(){r.reconnectAttempts++,r.open(!0)},i>r.maxReconnectInterval?r.maxReconnectInterval:i)}},s.onmessage=function(t){r.debug||e.debugAll;var n=u("message");n.data=t.data,d.dispatchEvent(n)},s.onerror=function(t){r.debug||e.debugAll,d.dispatchEvent(u("error"))}},1==this.automaticOpen&&this.open(!1),this.send=function(t){if(s)return r.debug||e.debugAll,s.send(t);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(e,t){void 0===e&&(e=1e3),c=!0,s&&s.close(e,t)},this.refresh=function(){s&&s.close()}}})?a.apply(t,i):a)||(e.exports=o)},"d8/S":function(e,t){},gtMj:function(e,t){},"qB+U":function(e,t,n){(function(e){var t,n,a,i=(t=function(e,t,n){return(e*(n-1)+2*t)/(n+1)},n=function(e){for(var t=e[0][0],n=e[0][1],a=0;a<e.length;a++){var i=e[a],o=i[0],s=i[1];o>t&&(t=o),s<n&&(n=s)}return[t,n]},{OBV:function(e){for(var t,n=[],a=e.length,i=0;i<a;i++){var o=0,s=e[i];if(0!=i){var r=n[i-1];o=s[0]>=t[0]?r+s[1]:r-s[1]}n.push(o),t=s}return n},MACD:function(e){for(var n,a,i=[],o=[],s=[],r=[],c=[],l=0;l<e.length;l++){var d=e[l];0==l?(i.push(d),o.push(d),r.push(0)):(i.push(t(i[l-1],d,12)),o.push(t(o[l-1],d,26))),s.push(i[l]-o[l]),0!=l&&r.push((n=r[l-1],a=s[l],(8*n+2*a)/10)),c.push(2*(s[l]-r[l]))}return{diffs:s,deas:r,bars:c}},KDJ:function(e){for(var t,a,i,o,s,r,c,l=[],d=[],u=[],p=[],h=[],m=0;m<e.length;m++){var f=e[m],x=f[2];l.push(f),(r=(s=n(l))[0])==(c=s[1])?d.push(0):d.push((x-c)/(r-c)*100),9==l.length&&l.shift(),0==m&&(t=a=d[m]),i=2/3*t+1/3*d[m],u.push(i),t=i,o=2/3*a+1/3*i,p.push(o),a=o,h.push(3*i-2*o)}return{k:u,d:p,j:h}},BOLL:function(e){for(var t=0,n=0,a=[],i=[],o=[],s=0;s<e.length;s++){var r,c,l,d;t+=e[s],s>=19?(r=(t-=n)/20,i.push(r),n=e[l=s-19],d=e.slice(l,l+20).reduce(function(e,t){return e+Math.pow(t-r,2)},0),c=Math.sqrt(d/20),a.push(r+2*c),o.push(r-2*c)):(a.push(-1),i.push(-1),o.push(-1))}return{upper:a,mid:i,lower:o}},RSI:function(e){for(var t=e[0],n=[6,12,24],a={},i=0;i<e.length;i++){for(var o=e[i],s=Math.max(o-t,0),r=Math.abs(o-t),c=0;c<n.length;c++){var l=n[c];a.hasOwnProperty("rsi"+l)?(a["lastSm"+l]=(s+(l-1)*a["lastSm"+l])/l,a["lastSa"+l]=(r+(l-1)*a["lastSa"+l])/l,0!=a["lastSa"+l]?a["rsi"+l].push(a["lastSm"+l]/a["lastSa"+l]*100):a["rsi"+l].push(0)):(a["lastSm"+l]=a["lastSa"+l]=0,a["rsi"+l]=[0])}t=o}return{rsi6:a.rsi6,rsi12:a.rsi12,rsi24:a.rsi24}},MA:a=function(e,t){for(var n=0,i=[],o=0;o<e.length;o++)n+=e[o],a=n/t,i.push(a);return i}});e&&(e.exports=i)}).call(t,n("3IRH")(e))}},[0]);
//# sourceMappingURL=app.83f1273db9cf17d3920d.js.map